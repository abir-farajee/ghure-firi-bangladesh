<!doctype html>
<html lang="en">
{% load static %}

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="html5 responsive bootstrap template">
    <meta name="keywords" content="HTML,CSS,XML,JavaScript,html5,css3, responsive, bootstrap,jquery,">
<link rel="shortcut icon" type="image/png" href="{% static 'admin/images/logo.png' %}">

    <title>ADMIN- GhureFiri Bangladesh </title>

    <link rel="stylesheet" href="{% static 'admin/css/bootstrap.min.css' %}">

    <link rel="stylesheet" href="{% static 'admin/css/font-awesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'admin/css/flaticon.css' %}">

    <link rel="stylesheet" href="{% static 'admin/css/metisMenu.min.css' %}">

    <link rel="stylesheet" href="{% static 'admin/css/apexcharts.css' %}">

    <link rel="stylesheet" href="{% static 'admin/css/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'admin/css/owl.theme.default.min.css' %}">
    <link href="{% static 'admin/css/dropify.css' %}" rel="stylesheet">

    <link rel="stylesheet" href="{% static 'admin/vendors/datatable/css/datatables.min.css' %}">
    <link rel="stylesheet" href="{% static 'admin/vendors/datatable/css/dataTables.bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'admin/vendors/datatable/css/dataTables.jqueryui.min.css' %}">
    <link rel="stylesheet" href="{% static 'admin/vendors/datatable/css/jquery.dataTables.min.css' %}">

    <link rel="stylesheet" href="{% static 'admin/style.css' %}">
    <link rel="stylesheet" href="{% static 'admin/css/responsive.css' %}">

    <script src="{% static 'admin/vendors/modernizr-js/modernizr.js' %}" type="text/javascript"></script>

</head>

<body>
    <div class="top-bar">
        <header>
            <div class="bottom-header">
                <div class="container-fluid">
                    <div class="row align-items-center">
                        <div class="col-lg-12 col-md-12">
                            <div class="menu-toggler">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                            <div class="bottom-header-right-content">
                                <div class="row align-items-center">
                                    <div class="col-lg-6 offset-lg-1 col-md-6 offset-md-1 col-sm-6 offset-sm-1">
                                        <div class="search">
                                            <form>
                                                <input type="text" placeholder="search..." class="form-control">
                                                <button class="search-btn"><i class="icofont-search"></i></button>
                                            </form>
                                        </div>
                                    </div>
                                    <div class="col-lg-5 col-md-5 col-sm-5">
                                        <ul>
                                        
                                                 <li>
                                                <div class="dropdown profile">
                                                    <button aria-expanded="false" aria-haspopup="true" class="btn dropdown-toggle" data-toggle="dropdown" id="dropdownMenuButton2" type="button">
                                                        <span class="profile-avater">
                                                            <img src="{% static 'admin/images/logo.png' %}"
                                                                class="img-fluid" alt="">
                                                        </span>
                                                        <span class="name">GhureFiri Bangladesh Admin</span>
                                                    </button>
                                                    <div aria-labelledby="dropdownMenuButton" class="dropdown-menu dropdown-menu-right">
                                                        <div class="profile-avater-show">
                                                            <div class="img">
                                                                <img src="{% static 'admin/images/logo.png' %}" class="img-fluid" alt="">
                                                            </div>
                                                            <h6>GhureFiri Bangladesh Admin</h6>
                                                        </div>

                                                        <a class="dropdown-item" href="adminlogout"><i
                                                                class="fa fa-sign-out"></i> logout</a>
                                                    </div>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </div>
    <div class="sidebar scrollbar-macosx">
        <div class="menu-close">
            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-x" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd"
                    d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z" />
                <path fill-rule="evenodd"
                    d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z" />
            </svg>
        </div>
        <div class="site-logo">
            <a href="index.html">
                <img src="images/logo.png" class="img-fluid" alt="">
            </a>
        </div>
        <nav>
            <ul id="metismenu">
                 <li><a href="adminhome"><i class="fi flaticon-dashboard"></i>Dashboard</a></li>
                <li><a href="addpackage"><i class="fi flaticon-plus"></i>Add Package</a></li>
                <li class="active"><a href="#"><i class="fi flaticon-plus"></i>Add Tour Place </a></li>
                <li><a href="addhotel"><i class="fi flaticon-plus"></i>Add Hotel</a></li>
                <li><a href="addtransportation"><i class="fi flaticon-plus"></i>Add Transportation</a></li>
                <li><a href="tourlist"><i class="fi flaticon-plus"></i>All Tour</a></li>
                <li><a href="packagelist"><i class="fi flaticon-plus"></i>Manage Package</a></li>
                <li><a href="packbooked"><i class="fi flaticon-plus"></i>Manage Package Booking</a></li>
                <li><a href="tourbooked"><i class="fi flaticon-plus"></i>Manage Tour Booking</a></li>
                <li> <a class="dropdown-item" href="adminlogout"><i class="fa fa-sign-out"></i> logout</a><li>


            </ul>
        </nav>
    </div>
    <div class="content-wrapper">
        <div class="container-fluid">


            <div class="view-area">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="view-dash-wrap dash-card">


                            <div class="add-listing-area ">
                                <div class="add-listing-wrap">
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <form action="addtour" id="myForm" name="myForm" method="post">
                                                <div class="tab-area">
                                                    <div class="col-xs-12 ">
                                                        <nav>
                                                            <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
                                                                <a class="nav-item nav-link active show" id="nav-general-tab" data-toggle="tab" href="#nav-general" role="tab" aria-controls="nav-general">Place Information</a>

                                                            </div>
                                                        </nav>
                                                        <div class="tab-content" id="nav-tabContent">
                                                            <div class="tab-pane fade active show" id="nav-general" role="tabpanel" aria-labelledby="nav-general-tab">


                                                                <div class="addlisting-form">


                                                                    <div class="row">


                                                                        {% csrf_token %}
                                                                        <div class="col-lg-6">

                                                                            <input type="text" name="place_name" class="form-control" placeholder="Place Name">
                                                                        </div>

                                                                        <div class="col-lg-6">
                                                                            <div class="drop-item">
                                                                                <div id="file-upload" class="section">


                                                                                    <input type="file" name="photo" class="dropify" data-default-file="" />
                                                                                    <input type="hidden" name="place_img" id="url">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>


                                                                <div class="row">


                                                                    <div class="submit-btn col-12">

                                                                        <button type="button" id="demo" class="theme-btn">Upload</button>
                                                                    </div>


                                                                </div>

                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                        </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>



                        <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
                        <script>
                            var config = {
                                apiKey: "AIzaSyAPBXBYOuClJop3F3aDEOhfF1kZjhUxGFA",
                                authDomain: "ghurefiribangladesh-e7ef2.firebaseapp.com",
                                databaseURL: "https://ghurefiribangladesh-e7ef2.firebaseio.com",
                                projectId: "ghurefiribangladesh-e7ef2",
                                storageBucket: "ghurefiribangladesh-e7ef2.appspot.com",
                                messagingSenderId: "198487718440",
                                appId: "1:198487718440:web:ab16558cabb12902c7931d",
                                measurementId: "G-B8PY09CQDG"
                            };
                            firebase.initializeApp(config);
                            // Get a reference to the storage service, which is used to create references in your storage bucket
                            function uploadimage() {
                                var storage = firebase.storage();
                                var file = document.getElementById("files").files[0];
                                var storageRef = storage.ref();
                                var thisref = storageRef.child("place_images").child(file.name).put(file);
                                thisref.on('state_changed', function(snapshot) {
                                        console.log("file uplaoded succesfully");
                                    },
                                    function(error) {},
                                    function() {
                                        // Upload completed successfully, now we can get the download URL
                                        var downloadURL = thisref.snapshot.downloadURL;
                                        console.log("got url");
                                        document.getElementById("url").value = downloadURL;
                                        alert("hoiseee");

                                        document.myForm.submit();
                                    });
                            }
                        </script><script src="{% static 'assets/js/zepto.min.js' %}"></script>
<script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
<script>
    $().ready(function() {


        $('input[name=photo]').change(function(e) {
            var file = e.target.files[0];



            // CANVAS RESIZING
            canvasResize(file, {
                width: 600,
                height: 600,
                crop: false,
                quality: 90,
                rotate: 0,
                callback: function(data, width, height) {


                    var img = new Image();
                    img.onload = function() {

                        $(this).css({
                            'margin': '10px auto',
                            'width': width,
                            'height': height
                        }).appendTo('#area div');

                    };
                    $(img).attr('src', data);

                    var fd = new FormData();
                    // Add file data
                    var f = canvasResize('dataURLtoBlob', data);
                    f.name = file.name;

                    var config = {
                        apiKey: "AIzaSyAPBXBYOuClJop3F3aDEOhfF1kZjhUxGFA",
                        authDomain: "ghurefiribangladesh-e7ef2.firebaseapp.com",
                        databaseURL: "https://ghurefiribangladesh-e7ef2.firebaseio.com",
                        projectId: "ghurefiribangladesh-e7ef2",
                        storageBucket: "ghurefiribangladesh-e7ef2.appspot.com",
                        messagingSenderId: "198487718440",
                        appId: "1:198487718440:web:ab16558cabb12902c7931d",
                        measurementId: "G-B8PY09CQDG"
                    };
                    firebase.initializeApp(config);
                    var storage = firebase.storage();

                    document.getElementById("demo").onclick = function() {
                        myFunction()
                    };

                    function myFunction() {

                        var storageRef = storage.ref();
                        var thisref = storageRef.child("place_images").child(f.name).put(f);
                        thisref.on('state_changed', function(snapshot) {
                                console.log("file uplaoded succesfully");
                            },
                            function(error) {},
                            function() {

                                var downloadURL = thisref.snapshot.downloadURL;
                                console.log("got url");
                                document.getElementById("url").value = downloadURL;
                                
                                document.myForm.submit();
                            });

                    };


                }
            });

        });
    });
</script>
<script src="{% static 'assets/js/binaryajax.js' %}"></script>
<script src="{% static 'assets/js/exif.js' %}"></script>
<script src="{% static 'assets/js/canvasResize.js' %}"></script>


                        <script src="{% static 'admin/js/jquery.min.js' %}" type="text/javascript"></script>
                        <script src="{% static 'admin/js/popper.min.js' %}" type="text/javascript"></script>

                        <script src="{% static 'admin/js/bootstrap.min.js' %}" type="text/javascript"></script>

                        <script src="{% static 'admin/js/metisMenu.min.js' %}" type="text/javascript"></script>

                        <script src="{% static 'admin/js/owl.carousel.min.js' %}" type="text/javascript"></script>

                        <script src="{% static 'admin/js/waypoints.min.js' %}" type="text/javascript"></script>
                        <script src="{% static 'admin/js/counterup.min.js' %}" type="text/javascript"></script>

                        <script src="{% static 'admin/js/jquery.scrollbar.min.js' %}" type="text/javascript"></script>

                        <script src="{% static 'admin/js/apexcharts.js' %}" type="text/javascript"></script>
                        <script src="{% static 'admin/js/dropify.js' %}" type="text/javascript"></script>
                        <script src="{% static 'admin/js/form-file-uploads.js' %}" type="text/javascript"></script>

                        <script src="{% static 'admin/vendors/datatable/js/datatables.min.js" type="text/javascript"></script>
                        <script src="{% static 'admin/vendors/datatable/js/dataTables.bootstrap.min.js' %}" type="text/javascript"></script>
                        <script src="{% static 'admin/vendors/datatable/js/dataTables.jqueryui.min.js' %}" type="text/javascript"></script>
                        <script src="{% static 'admin/vendors/datatable/js/jquery.dataTables.min.js' %}" type="text/javascript"></script>

                        <script src="{% static 'admin/js/scripts.js' %}" type="text/javascript"></script>
                        <script src="{% static 'admin/assets/js//rocket-loader.min.js' %}" type="text/javascript"></script>
</body>


</html>